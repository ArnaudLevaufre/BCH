\documentclass[a4paper, 11pt, svgnames]{report}
\usepackage[margin=3cm]{geometry}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[french]{babel}
\usepackage{hyperref}
\usepackage[toc,acronym,nopostdot]{glossaries}
\usepackage{graphicx}
\usepackage{float}
\usepackage{minted}
\usepackage{mathtools}
\usepackage[toc, page]{appendix}
\usepackage{subcaption}
\usepackage{rotating}
\usepackage{pst-circ}

\usepackage{tikz}
\usetikzlibrary{arrows, arrows.spaced ,automata, snakes, circuits.logic.US, calc, shapes.geometric}

\tikzstyle{block} = [draw]
\tikzstyle{asyncblock} = [draw]


\input{./components.tex}
%
% Glossaries
%

\makeglossaries

%
% Document
%

\title{Décodeur BCH}
\author{Ronan~\bsc{Le Guillou} \and Arnaud~\bsc{Levaufre} \and Bastien~\bsc{Orivel}}

\begin{document}
    \maketitle
    \tableofcontents
    \printglossaries
    \listoffigures
    \listoftables

    \chapter{Introduction}

    \chapter{Étude du circuit}
        \section{Architecture globale}


        \section{Calcul du syndrome}
            Le calcul du syndrome est décomposé en une unité de traitement et
            un unité de contrôle qui sont présentées dans les
            sections~\ref{sec:ut_syndrome} et \ref{sec:uc_syndrome}. La
            figure~\ref{fig:syndrome} présenté ci-dessous montre les signaux
            entrants et sortants nécessaire au calcul du syndrome par les
            unités proposées. Le principe de fonctionnement est simple,
            l'utilisateur de ce bloc propose une donnée codée sur 32 bits sur
            l'entrée «~Data~» et démarre le calcul en imposant l'entrée
            «~Start~» à 1.  Une fois calculé le syndrome est disponible sur la
            sortie «~Syndrome~» et le drapeau «~End~» est passé à 1 sur une durée
            d'une période d'horloge.

            \begin{figure}[H]
                \centering
                \begin{tikzpicture}[>=stealth,scale=1, every node/.style={scale=1}, circuit logic US]
                    \node[shape=syndrome] (syndrome) {Syndrome};

                    \draw[<-, double] (syndrome.Data) -- +(-1, 0) node [anchor=east] {};
                    \draw[<-] (syndrome.Start) -- +(-1, 0) node [anchor=east] {};
                    \draw[<-] (syndrome.Reset) -- +(-1, 0) node [anchor=east] {};
                    \draw[<-] (syndrome.CLK) -- +(-1, 0) node [anchor=east] {};

                    \draw[->, double] (syndrome.Syndrome) -- +(1, 0) node [anchor=west] {};
                    \draw[->] (syndrome.End) -- +(1, 0) node [anchor=west] {};
                \end{tikzpicture}
                \caption{Vue extérieur du bloc de calcul du syndrome}
                \label{fig:syndrome}
            \end{figure}

            \subsection{Unité de traitement}
            \label{sec:ut_syndrome}

            L'unité de traitement est présentée en
            figure~\ref{fig:ut_syndrome_ext} et \ref{fig:ut_syndrome} et
            reprend le schéma du sujet en lui ajoutant le registre à décalage
            permettant de rentrer la donnée utilisateur bit par bit, poids
            faible en premier.

            \begin{figure}[H]
                \centering
                \begin{tikzpicture}[>=stealth,scale=1, every node/.style={scale=1}, circuit logic US]
                    \node[shape=utsyndrome] (utsyndrome) {UT Syndrome};

                    \draw[<-, double] (utsyndrome.Data) -- +(-1, 0) node [anchor=east] {};
                    \draw[<-] (utsyndrome.ld) -- +(-1, 0) node [anchor=east] {};
                    \draw[<-] (utsyndrome.calc) -- +(-1, 0) node [anchor=east] {};
                    \draw[<-] (utsyndrome.clear) -- +(-1, 0) node [anchor=east] {};
                    \draw[<-] (utsyndrome.CLK) -- +(-1, 0) node [anchor=east] {};

                    \draw[->, double] (utsyndrome.Syndrome) -- +(1, 0) node [anchor=west] {};

                \end{tikzpicture}
                \caption{vue éxtérieur de l'unité de traitement}
                \label{fig:ut_syndrome_ext}
            \end{figure}

            \begin{figure}[H]
                \centering
                \begin{tikzpicture}[>=stealth,scale=0.375, every node/.style={scale=0.5}, circuit logic US]
                    %\draw[help lines] (0, 0) grid (29, 32);

                    \node[shape=dff] at (12, 30) (dff0) {0};
                    \node[shape=dff] at (12, 27) (dff1) {1};
                    \node[shape=dff] at (12, 24) (dff2) {2};
                    \node[shape=dff] at (12, 21) (dff3) {3};
                    \node[shape=dff] at (12, 18) (dff4) {4};
                    \node[shape=dff] at (12, 15) (dff5) {5};
                    \node[shape=dff] at (12, 12) (dff6) {6};
                    \node[shape=dff] at (12, 9) (dff7) {7};
                    \node[shape=dff] at (12, 6) (dff8) {8};
                    \node[shape=dff] at (12, 3) (dff9) {9};

                    \node[circle,draw,fill=black,scale=0.3] at (9,24)  {};
                    \node[circle,draw,fill=black,scale=0.3] at (9, 18)  {};
                    \node[circle,draw,fill=black,scale=0.3] at (9, 15)  {};
                    \node[circle,draw,fill=black,scale=0.3] at (9, 9)  {};
                    \node[circle,draw,fill=black,scale=0.3] at (9, 6)  {};
                    \node[circle,draw,fill=black,scale=0.3] at (10.5, 28.7)  {};
                    \node[circle,draw,fill=black,scale=0.3] at (10.5, 28.7)  {};
                    \node[circle,draw,fill=black,scale=0.3] at (10.5, 25.7)  {};
                    \node[circle,draw,fill=black,scale=0.3] at (10.5, 22.7)  {};
                    \node[circle,draw,fill=black,scale=0.3] at (10.5, 19.7)  {};
                    \node[circle,draw,fill=black,scale=0.3] at (10.5, 16.7)  {};
                    \node[circle,draw,fill=black,scale=0.3] at (10.5, 13.7)  {};
                    \node[circle,draw,fill=black,scale=0.3] at (10.5, 10.7)  {};
                    \node[circle,draw,fill=black,scale=0.3] at (10.5, 7.7)   {};
                    \node[circle,draw,fill=black,scale=0.3] at (10.5, 4.7)   {};
                    \node[circle,draw,fill=black,scale=0.3] at (10.5, 1.7)   {};
                    \node[circle,draw,fill=black,scale=0.3] at (10, 31.3)   {};
                    \node[circle,draw,fill=black,scale=0.3] at (10, 28.3)   {};
                    \node[circle,draw,fill=black,scale=0.3] at (10, 25.3)   {};
                    \node[circle,draw,fill=black,scale=0.3] at (10, 22.3)   {};
                    \node[circle,draw,fill=black,scale=0.3] at (10, 19.3)   {};
                    \node[circle,draw,fill=black,scale=0.3] at (10, 16.3)   {};
                    \node[circle,draw,fill=black,scale=0.3] at (10, 13.3)   {};
                    \node[circle,draw,fill=black,scale=0.3] at (10, 10.3)   {};
                    \node[circle,draw,fill=black,scale=0.3] at (10, 7.3)    {};
                    \node[circle,draw,fill=black,scale=0.3] at (10, 4.3)    {};

                    \node[circle,draw,fill=black,scale=0.3] at (13, 30.5)    {};
                    \node[circle,draw,fill=black,scale=0.3] at (13, 27.5)    {};
                    \node[circle,draw,fill=black,scale=0.3] at (13, 24.5)    {};
                    \node[circle,draw,fill=black,scale=0.3] at (13, 21.5)    {};
                    \node[circle,draw,fill=black,scale=0.3] at (13, 18.5)    {};
                    \node[circle,draw,fill=black,scale=0.3] at (13, 15.5)    {};
                    \node[circle,draw,fill=black,scale=0.3] at (13, 12.5)    {};
                    \node[circle,draw,fill=black,scale=0.3] at (13, 9.5)     {};
                    \node[circle,draw,fill=black,scale=0.3] at (13, 6.5)     {};
                    \node[circle,draw,fill=black,scale=0.3] at (13, 3.5)     {};

                    \node[xor gate, rotate=-90, scale=1.5] at (9.5, 22) (x3) {};
                    \node[xor gate, rotate=-90, scale=1.5] at (9.5, 16) (x5) {};
                    \node[xor gate, rotate=-90, scale=1.5] at (9.5, 13) (x6) {};
                    \node[xor gate, rotate=-90, scale=1.5] at (9.5, 7) (x8) {};
                    \node[xor gate, rotate=-90, scale=1.5] at (9.5, 4) (x9) {};
                    \node[xor gate, rotate=90, scale=1.5] at (8, 28) (x10) {};

                    \node[shape=srr] at (5, 24) (synbuff) {};

                    \node[left] at (0, 26) (data) {Data $[~31:0~]$};
                    \node[left] at (0, 25) (ld) {Ld};
                    \node[left] at (0, 24) (calc) {Calc};
                    \node[right] at (19, 31.5) (syndrome) {Syndrome $[~9:0~]$};
                    \node[left] at (0, 23) (clear) {Clear} ;

                    \draw [->, double] (data) -- (2.5, 26) |- (synbuff.Din);
                    \draw [->] (ld) -- (2, 25) |- (synbuff.Ld);

                    \draw [->] (synbuff.Dout) -| (x10.input 1);
                    \draw [->] (x10.output) -- (8, 29) -- (9, 29) -- (9, 24) -| (x3.input 2);
                    \draw [->] (x10.output) -- (8, 29) -- (9, 29) -- (9, 24) -- (9, 18) -| (x5.input 2);
                    \draw [->] (x10.output) -- (8, 29) -- (9, 29) -- (9, 24) -- (9, 15) -| (x6.input 2);
                    \draw [->] (x10.output) -- (8, 29) -- (9, 29) -- (9, 24) -- (9, 9) -| (x8.input 2);
                    \draw [->] (x10.output) -- (8, 29) -- (9, 29) -- (9, 24) -- (9, 6) -| (x9.input 2);

                    \draw [->] (x10.output) |- (dff0.D);
                    \draw [->] (x9.output) |- (dff9.D);
                    \draw [->] (x8.output) |- (dff8.D);
                    \draw [->] (x6.output) |- (dff6.D);
                    \draw [->] (x5.output) |- (dff5.D);
                    \draw [->] (x3.output) |- (dff3.D);

                    \draw [->] (dff0.Q) -| (13, 28.5) -- (11, 28.5) |- (dff1.D);
                    \draw [->] (dff1.Q) -| (13, 25.5) -- (11, 25.5) |- (dff2.D);
                    \draw [->] (dff2.Q) -| (13, 22.5) -- (13, 22.5) -| (x3.input 1);
                    \draw [->] (dff3.Q) -| (13, 19.5) -- (11, 19.5) |- (dff4.D);
                    \draw [->] (dff4.Q) -| (13, 16.5) -- (13, 16.5) -| (x5.input 1);
                    \draw [->] (dff5.Q) -| (13, 13.5) -- (13, 13.5) -| (x6.input 1);
                    \draw [->] (dff6.Q) -| (13, 10.5) -- (11, 10.5) |- (dff7.D);
                    \draw [->] (dff7.Q) -| (13, 7.5) -- (13, 7.5) -| (x8.input 1);
                    \draw [->] (dff8.Q) -| (13, 4.5) -- (13, 4.5) -| (x9.input 1);
                    \draw [->] (dff9.Q) -| (13, 1.5) -- (11, 1.5) -| (x10.input 2);

                    \draw [->] (calc) -- (2, 24) -- (2, 21) -- (10.5, 21) -- (10.5, 28.7) -| (dff0.S);
                    \draw [->] (calc) -- (2, 24) -- (2, 21) -- (10.5, 21) -- (10.5, 25.7) -| (dff1.S);
                    \draw [->] (calc) -- (2, 24) -- (2, 21) -- (10.5, 21) -- (10.5, 22.7) -| (dff2.S);
                    \draw [->] (calc) -- (2, 24) -- (2, 21) -- (10.5, 21) -- (10.5, 19.7) -| (dff3.S);
                    \draw [->] (calc) -- (2, 24) -- (2, 21) -- (10.5, 21) -- (10.5, 16.7) -| (dff4.S);
                    \draw [->] (calc) -- (2, 24) -- (2, 21) -- (10.5, 21) -- (10.5, 13.7) -| (dff5.S);
                    \draw [->] (calc) -- (2, 24) -- (2, 21) -- (10.5, 21) -- (10.5, 10.7) -| (dff6.S);
                    \draw [->] (calc) -- (2, 24) -- (2, 21) -- (10.5, 21) -- (10.5, 7.7) -| (dff7.S);
                    \draw [->] (calc) -- (2, 24) -- (2, 21) -- (10.5, 21) -- (10.5, 4.7) -| (dff8.S);
                    \draw [->] (calc) -- (2, 24) -- (2, 21) -- (10.5, 21) -- (10.5, 1.7) -| (dff9.S);

                    \draw [->] (clear) -- (1, 23) -- (1, 20) -- (10, 20) -- (10, 31.3) -| (dff0.R);
                    \draw [->] (clear) -- (1, 23) -- (1, 20) -- (10, 20) -- (10, 28.3) -| (dff1.R);
                    \draw [->] (clear) -- (1, 23) -- (1, 20) -- (10, 20) -- (10, 25.3) -| (dff2.R);
                    \draw [->] (clear) -- (1, 23) -- (1, 20) -- (10, 20) -- (10, 22.3) -| (dff3.R);
                    \draw [->] (clear) -- (1, 23) -- (1, 20) -- (10, 20) -- (10, 19.3) -| (dff4.R);
                    \draw [->] (clear) -- (1, 23) -- (1, 20) -- (10, 20) -- (10, 16.3) -| (dff5.R);
                    \draw [->] (clear) -- (1, 23) -- (1, 20) -- (10, 20) -- (10, 13.3) -| (dff6.R);
                    \draw [->] (clear) -- (1, 23) -- (1, 20) -- (10, 20) -- (10, 10.3) -| (dff7.R);
                    \draw [->] (clear) -- (1, 23) -- (1, 20) -- (10, 20) -- (10, 7.3) -| (dff8.R);
                    \draw [->] (clear) -- (1, 23) -- (1, 20) -- (10, 20) -- (10, 4.3) -| (dff9.R);

                    \draw [->] (dff0.Q) -- (18, 30.5) node [above left](b0) {0};
                    \draw [->] (dff1.Q) -- (18, 27.5) node [above left](b1) {1};
                    \draw [->] (dff2.Q) -- (18, 24.5) node [above left](b2) {2};
                    \draw [->] (dff3.Q) -- (18, 21.5) node [above left](b3) {3};
                    \draw [->] (dff4.Q) -- (18, 18.5) node [above left](b4) {4};
                    \draw [->] (dff5.Q) -- (18, 15.5) node [above left](b5) {5};
                    \draw [->] (dff6.Q) -- (18, 12.5) node [above left](b6) {6};
                    \draw [->] (dff7.Q) -- (18, 9.5) node [above left](b7) {7};
                    \draw [->] (dff8.Q) -- (18, 6.5) node [above left](b8) {8};
                    \draw [->] (dff9.Q) -- (18, 3.5) node [above left](b9) {9};
                    \draw [->, double] (18, 3.5) |- (syndrome);

                \end{tikzpicture}
                \caption{Unité de traitement pour le calcul du syndrome}
                \label{fig:ut_syndrome}
            \end{figure}

            \subsection{Unité de contrôle}
            \label{sec:uc_syndrome}

            L'unité de controle utilisé pour le calcul du syndrome est définie
            par la machine à étât présenté en figure~\ref{fig:uc_syndrome_ext}
            et \ref{fig:me_syndrome}.  Elle se base sur un compteur afin
            d'autoriser le décalage et calcul du syndrome pendant les 31 coups
            d'horloge nécéssaire. Après les 31 coups d'horloge le résultat est
            conservé dans les registres permettants le calcul du syndrome. Il
            sera conservé jusqua la prochaine demande de calcul de syndrome,
            qui débutera par le chargement du registre à décalage avec les
            données issues de la pile et par la remise à zéro des registres de
            calculs du syndrome.

            \begin{figure}[H]
                \centering
                \begin{tikzpicture}[>=stealth,scale=1, every node/.style={scale=1}, circuit logic US]
                    \node[shape=ucsyndrome] (ucsyndrome) {UC Syndrome};

                    \draw[<-] (ucsyndrome.Start) -- +(-1, 0) node [anchor=east] {};
                    \draw[<-] (ucsyndrome.Reset) -- +(-1, 0) node [anchor=east] {};
                    \draw[<-] (ucsyndrome.CLK) -- +(-1, 0) node [anchor=east] {};

                    \draw[->] (ucsyndrome.End) -- +(1, 0) node [anchor=west] {};
                    \draw[->] (ucsyndrome.Calc) -- +(1, 0) node [anchor=west] {};
                    \draw[->] (ucsyndrome.Ld) -- +(1, 0) node [anchor=west] {};
                    \draw[->] (ucsyndrome.Clear) -- +(1, 0) node [anchor=west] {};

                \end{tikzpicture}
                \caption{Vue éxtérieur de l'unité de controle du calcul du syndrome}
                \label{fig:uc_syndrome_ext}
            \end{figure}

            \begin{figure}[H]
                \begin{tikzpicture}[>=stealth',shorten >=1pt,auto,node distance=4cm]
                    \tikzstyle{every initial by arrow} = [text=red, -, draw=red, decorate, decoration=zigzag]
                    \node[state,accepting, initial, initial text=reset](E1){Repos};
                    \node[state](E2)[below of=E1]{Dec\_syn};

                    \path[->] (E1) edge [loop right] node {!start\_syndrome} (E1);
                    \path[->] (E1) edge node {start\_syndrome / ld\_syn\_buff, clear, syn\_dcpt=30} (E2);
                    \path[->] (E2) edge [loop right] node {syn\_dcpt != 0 / calc, syn\_dcpt -= 1} (E2);
                    \path[->] (E2) edge [bend left] node {syn\_dcpt == 0 / end\_syndrome} (E1);

                \end{tikzpicture}
                \caption{Machine à état utilisée pour le calcul du syndrome}
                \label{fig:me_syndrome}
            \end{figure}

            \subsection{Définition des connexions entre l'UC et l'UT}

            \begin{figure}[H]
                \centering
                \begin{tikzpicture}[>=stealth, node distance=3cm, scale=0.8, every node/.style={scale=0.8}, circuit logic US]
                    \node[shape=ucsyndrome] at (5, 5) (ucsyndrome) {UC Syndrome};
                    \node[shape=utsyndrome] (utsyndrome) [below of=ucsyndrome] {UT Syndrome};

                    \draw[<-] (ucsyndrome.Start) -- +(-3, 0) node [anchor=east] {start\_syndrome};
                    \draw[<-] (ucsyndrome.Reset) -- +(-3, 0) node [anchor=east] {reset};
                    \draw[<-] (ucsyndrome.CLK) -- +(-3, 0) node [anchor=east] (CLK) {CLK};

                    \draw[->] (ucsyndrome.End) -- +(3, 0) node [anchor=west] {end\_syndrome};
                    \draw[->] (ucsyndrome.Calc) -- +(1, 0) node [anchor=west] {} -- +(1, -1.25) -- +(-6, -1.25) |- (utsyndrome.calc);
                    \draw[->] (ucsyndrome.Ld) -- +(1.25, 0) node [anchor=west] {} -- +(1.25, -2) -- +(-5.75, -2) |- (utsyndrome.ld);
                    \draw[->] (ucsyndrome.Clear) -- +(0.75, 0) node [anchor=west] {} -- +(0.75, -0.5) -- +(-6.25, -0.5) |- (utsyndrome.clear);

                    \draw[<-, double] (utsyndrome.Data) -- +(-3, 0) node [anchor=east] {Data\_in (FifoOut)};
                    \draw[<-] (utsyndrome.calc) -- +(-1, 0) node [anchor=east] {};
                    \draw[<-] (utsyndrome.CLK) -- +(-2, 0) node [anchor=east] {} |- (CLK);

                    \draw[->, double] (utsyndrome.Syndrome) -- +(3, 0) node [anchor=west] {syndrome};

                    \draw[dashed] (0,0) -- (10, 0) -- (10, 7) -- (0, 7) -- (0,0);
                \end{tikzpicture}

                \caption{Connexions entre l'UC et l'UT du calcul du syndrome}
                \label{fig:me_syndrome}
            \end{figure}


        \section{Look up table}
            \subsection{Unité de traitement}
            \begin{figure}[H]
                \centering
                \begin{tikzpicture}[>=stealth, node distance=3cm, scale=0.7, every node/.style={scale=0.7}, circuit logic US]
                    %\draw[help lines] (0, 0) grid (20,20);

                    \node[shape=counter] at (5,11) (p1counter) {P1};
                    \node[shape=counter] at (5,5) (p2counter) {P2 + 1};

                    \node[shape=lut] at (9, 8) (lut) {LUT};

                    \node[shape=dff] at (12, 14) (syn) {};

                    \node[xor gate, scale=1.5] at (12, 8) (xor) {};

                    \node[circle, draw] at (14, 9) (cmp1) {=};
                    \node[circle, draw] at (14, 7) (cmp2) {=};

                    \node[circle, draw] at (9, 11) (p1max) {=};
                    \node[circle, draw] at (9, 5) (p2max) {=};

                    \draw[<-, double] (syn.D) -- +(-9.5, 0) node [anchor=east] {Syndrome $[9:0]$};
                    \draw[<-] (syn.S) -- +(0, -0.25) -- +(-0.75, -0.25) |- (2, 13.5) node [anchor=east] {Ld\_syndrome};

                    \draw[<-] (p1counter.Inc) -- +(-2, 0) node [anchor=east] {Inc\_P1};
                    \draw[<-] (p1counter.Raz) -- +(-2, 0) node [anchor=east] {Raz};

                    \draw[<-] (p2counter.Inc) -- +(-2, 0) node [anchor=east] {Inc\_P2};
                    \draw[<-] (p2counter.Ld) -- +(-2, 0) node [anchor=east] {Ld\_P2};
                    \draw[<-] (p2counter.Raz) -- +(-2, 0) node [anchor=east] {Raz};

                    \draw[->, double] (p1counter.Q) -- +(1, 0) -- +(1, -4) -- +(-3, -4) |- (p2counter.Data);
                    \draw[->, double] (p1counter.Q) -- +(1, 0) -- +(1, -4) |- (lut.Pone);
                    \draw[->, double] (p1counter.Q) -- +(1, 0) |- (p1max.west);

                    \draw[->, double] (p2counter.Q) -- +(1, 0) |- (lut.Ptwo);
                    \draw[->, double] (p2counter.Q) -- +(1, 0) |- (p2max.west);

                    \draw[->, double] (lut.Sone) -- +(1, 0) |- (xor.input 1);
                    \draw[->, double] (lut.Sone) -- +(1, 0) |- (cmp1.west);
                    \draw[->, double] (lut.Stwo) -- +(1, 0) |- (xor.input 2);

                    \draw[->, double] (xor.output) -- +(0.25, 0) |- (cmp2.west);

                    \draw[->, double] (syn.Q) -| (cmp1.north);
                    \draw[->, double] (syn.Q) -| (13.33, 7.5) -| (cmp2.north);

                    \draw[->] (cmp1.east) -- +(2, 0) node [anchor=west] {ERR1};
                    \draw[->] (cmp2.east) -- +(2, 0) node [anchor=west] {ERR2};
                    \draw[->] (p1max.east) -- +(7, 0) node [anchor=west] {P1\_max};
                    \draw[->] (p2max.east) -- +(7, 0) node [anchor=west] {P2\_max};
                    \draw[<-, double] (p1max.north) -- +(0, 1) node [anchor=south] {29};
                    \draw[<-, double] (p2max.south) -- +(0, -1) node [anchor=north] {30};

                    \node at (6, 12)[anchor=south west] {5};
                    \node at (6, 6)[anchor=south west] {5};
                    \node at (10, 8.5)[anchor=south west] {10};
                    \node at (10, 7.5)[anchor=south west] {10};

                    \draw[-,dashed] (2.5,2) -- (15.5, 2) -- (15.5, 16) -- (2.5, 16) -- (2.5, 2);

                \end{tikzpicture}
                \caption{Unité de traitement de la Look up table.}
                \label{fig:me_syndrome}
            \end{figure}

            \subsection{Unité de controle}

            \begin{figure}[H]
                \begin{tikzpicture}[>=stealth',shorten >=1pt,auto,node distance=4cm]
                    \tikzstyle{every initial by arrow} = [initial text=reset, text=red, -, draw=red, decorate, decoration=zigzag]
                    \node[state, accepting, initial](E1){Idle};
                    \node[state](E2)[below of=E1]{Look up};

                    \path[->] (E1) edge [loop right] node {!start\_lut} (E1);
                    \path[->] (E1) edge node {start\_lut / raz, ld\_syndrome} (E2);

                    \path[->] (E2) edge [loop right] node  {p2\_max / inc\_p1, ld\_p2} (E2);
                    \path[->] (E2) edge [loop below] node {!p1\_max . !p2\_max / inc\_p2} (E2);

                    \draw[->] (node cs:name=E2,angle=205) parabola +(-1, 1.5) node[anchor=east] {err1 / end\_lut, ld\_err, err = "01"} parabola[bend at end] (node cs:name=E1,angle=250);
                    \draw[->] (node cs:name=E2,angle=180) parabola +(-1, 2) node[anchor=east] {err2 / end\_lut, ld\_err, err = "10"} parabola[bend at end] (node cs:name=E1,angle=225);
                    \draw[->] (node cs:name=E2,angle=155) parabola +(-1, 2.5) node[anchor=east] {p1\_max / end\_lut, ld\_err, err = "11"} parabola[bend at end] (node cs:name=E1,angle=200);
                    %\draw[-] (node cs:name=E2, angle=100) edge [bend left] node[pos=0.7, left] {err1 / end\_lut, ld\_err, err = "01"} (node cs:name=E1, angle=250);
                    %\draw[-] (node cs:name=E2, angle=125) edge [bend left] node[pos=0.5, left] {err2 / end\_lut, ld\_err, err = "10"} (node cs:name=E1, angle=225);
                    %\draw[-] (node cs:name=E2, angle=150) edge [bend left] node[pos=0.3, left] {p1\_max / end\_lut, ld\_err, err = "11"} (node cs:name=E1, angle=200);

                \end{tikzpicture}
                \caption{Machine à état utilisée pour le calcul du syndrome}
                \label{fig:me_syndrome}
            \end{figure}

            \subsection{Définition des connexions entre l'UC et l'UT}
            \begin{figure}[H]
                \centering
                \begin{tikzpicture}[>=stealth, scale=0.7, every node/.style={scale=0.7}, circuit logic US]
                    %\draw[help lines] (0, 0) grid (20,20);
                    \node[shape=uclut] at (5, 11) (uclut) {UC\_Lut};
                    \node[shape=utlut] at (5, 5) (utlut) {UT\_Lut};

                    \draw[->] (uclut.Raz) -- (utlut.Raz);
                    \draw[->] (uclut.LdPtwo) -- (utlut.LdPtwo);
                    \draw[->] (uclut.LdSyndrome) -- (utlut.LdSyndrome);
                    \draw[->] (uclut.IncPone) -- (utlut.IncPone);
                    \draw[->] (uclut.IncPtwo) -- (utlut.IncPtwo);

                    \draw[->] (utlut.PoneMax) -- (uclut.PoneMax);
                    \draw[->] (utlut.PtwoMax) -- (uclut.PtwoMax);
                    \draw[->] (utlut.ErrOne) -- (uclut.ErrOne);
                    \draw[->] (utlut.ErrTwo) -- (uclut.ErrTwo);

                    \draw[<-] (uclut.Start) -- +(-2, 0) node[anchor=east] {Start\_lut};
                    \draw[<-] (uclut.Reset) -- +(-2, 0) node[anchor=east] {Reset};

                    \draw[->] (uclut.End) -- +(2, 0) node[anchor=west] {End\_lut};
                    \draw[->, double] (uclut.Err) -- +(2, 0) node[anchor=west] {Err};
                    \draw[->] (uclut.LdErr) -- +(2, 0) node[anchor=west] {Ld\_Err};

                    \draw[<-, double] (utlut.Syndrome) -- +(-2,0) node[anchor=east] {Syndrome};

                    \node at (7.5, 11.6)[anchor=south west] {2};
                    \node at (2.5, 5)[anchor=south east] {10};

                    \draw[-,dashed] (1.5, 1.5) -- (8.5, 1.5) -- (8.5, 14.5) -- (1.5, 14.5) -- (1.5, 1.5);

                \end{tikzpicture}
                \caption{Connexions entre l'UC et l'UT de la look up table}
                \label{fig:me_syndrome}
            \end{figure}


        \section{Correcteur}
            \subsection{Unité de traitement}
            \begin{figure}[H]
                \centering
                \begin{tikzpicture}[>=stealth, scale=0.6, every node/.style={scale=0.6}, circuit logic US]
                    %\draw[help lines] (0, 0) grid (20,20);

                    \node[shape=srr] at (3, 3) (srr) {};
                    \node[not gate] at (5, 2) (not) {};

                    \node[trapezium, draw, rotate=-90, scale=3] at (10, 2.5) (muxcorr) {};
                    \draw (muxcorr.south west) -- +(0,0) node[anchor=west] {0};
                    \draw (muxcorr.south east) -- +(0,0) node[anchor=west] {1};

                    \node[shape=counter] at (3, 10) (counter) {};

                    \node[circle, draw] at (6, 12) (cmp2) {=};
                    \node[circle, draw] at (6, 8) (cmp1) {=};

                    \node[trapezium, draw, rotate=-90, scale=3] at (9, 12) (muxcmp2) {};
                    \draw (muxcmp2.south west) -- +(0,0) node[anchor=west] {1};
                    \draw (muxcmp2.south east) -- +(0,0) node[anchor=west] {0};

                    \node[trapezium, draw, rotate=-90, scale=3] at (9, 8) (muxcmp1) {};
                    \draw (muxcmp1.south west) -- +(0,0) node[anchor=west] {0};
                    \draw (muxcmp1.south east) -- +(0,0) node[anchor=west] {1};

                    \node[or gate, rotate=-90] at (10, 6) (orcorr) {};
                    \node[or gate, rotate=-90] at (9, 14) (orsel) {};

                    \node[shape=pile] at (13, 2) (pile) {};

                    \draw[<-] (counter.Raz) -- +(-2, 0) node[anchor=east] {Raz};
                    \draw[<-, double] (srr.Din) -- +(-2, 0) node[anchor=east] {Din};
                    \draw[<-] (srr.Ld) -- +(-2, 0) node[anchor=east] {Ld\_buf};
                    \draw[<-] (srr.Shift) -- +(-2, 0) node[anchor=east] {Dec\_Buf};
                    \draw[<-] (pile.Raz) -| +(-0.25, -1) -- +(-12, -1) node[anchor=east] {Raz};
                    \draw[<-] (pile.Ld) -| +(-0.5, -1.25) -- +(-12, -1.25) node[anchor=east] {Ld\_Corr};
                    \draw[<-, double] (16, 5) |- (0, 15) node[anchor=east] (err) {Err};
                    \draw[<-] (orsel.input 1) -- +(0, 0.75);
                    \draw[<-] (orsel.input 2) -- +(0, 0.75);
                    \draw[<-] (muxcmp1.west) |- +(-2, 0.5) -- +(-2, 6.3);
                    \draw[<-, double] (cmp1.west) -| +(-0.65, -1) -- +(-5.65, -1)  node[anchor=east] {P1};
                    \draw[<-, double] (cmp2.west) -| +(-0.65, 1) -- +(-5.65, 1)  node[anchor=east] {P2};

                    \draw[->] (srr.Dout) -- +(5, 0) |- (muxcorr.south west);
                    \draw[->] (srr.Dout) -- +(0.5, 0) |- (not.input);
                    \draw[->] (not.output) -- +(3.55, 0) |- (muxcorr.south east);
                    \draw[->] (muxcorr.north) -- +(1, 0) |- (pile.In);

                    \draw[->] (muxcmp1.north) -| (orcorr.input 2);
                    \draw[->] (muxcmp2.north) -| (orcorr.input 1);
                    \draw[->] (orcorr.output) -- (muxcorr.west);

                    \draw[<-] (muxcmp1.south west) -- +(-1, 0) node[anchor=east] {0};
                    \draw[->] (cmp1.east) -- +(2, 0) |- (muxcmp1.south east);

                    \draw[<-] (muxcmp2.south east) -- +(-1, 0) node[anchor=east] {0};
                    \draw[->] (cmp2.east) -- +(2, 0) |- (muxcmp2.south west);

                    \draw[->] (orsel.output) -- (muxcmp2.west);
                    \draw[->, double] (counter.Q) -| (cmp2.south);
                    \draw[->, double] (counter.Q) -| (cmp1.north);

                    \draw[->, double] (14, 5) -- +(6, 0) node[anchor=west] {D\_corr\_out};

                    \draw[->, double] (pile.Dout) -| +(4, 3);

                    \draw[->, double] (17, 6) node[anchor=south] {0} -- +(0, -1);
                    \draw[->, double] (15, 6) node[anchor=south] {0} -- +(0, -1);

                    \node at (1, 15)[anchor=south west] {2};
                    \node at (1, 13)[anchor=south west] {5};
                    \node at (1, 7)[anchor=south west] {5};
                    \node at (1, 3.75)[anchor=south west] {32};
                    \node at (4, 11)[anchor=south west] {5};
                    \node at (9, 15)[anchor=north west] {[1]};
                    \node at (9, 15)[anchor=north east] {[0]};
                    \node at (7, 15)[anchor=north west] {[1]};
                    \node at (14, 2)[anchor=south west] {32};

                    \node at (15, 5)[anchor=south west] {\rotatebox{90}{6 $[31:26]$}};
                    \node at (16, 5)[anchor=south west] {\rotatebox{90}{2 $[25:24]$}};
                    \node at (17, 5)[anchor=south west] {\rotatebox{90}{3 $[23:21]$}};
                    \node at (18, 5)[anchor=north west] {\rotatebox{-90}{21 $[20:0]$}};

                    \draw[dashed] (1, 0) -- (19, 0) -- (19, 16) -- (1, 16) -- (1,0);


                \end{tikzpicture}
                \caption{Unité de traitement du correcteur}
                \label{fig:me_syndrome}
            \end{figure}
            \subsection{Unité de contrôle}
            \subsection{Définition des connexions entre l'UC et l'UT}

    \begin{thebibliography}{99}
        %\bibitem{openlayers} Openlayers, \url{http://openlayers.org/}
    \end{thebibliography}

    \begin{appendices}
    \end{appendices}

\end{document}
